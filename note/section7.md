# Section 7: 중고차 견적 API 앱

## 개요

이번 섹션에서는 메시지 애플리케이션을 중단하고, 다음에 구성할 앱에 대해 논의합니다.

다음 앱은 이 메시지 앱과 본질적으로 비슷하지만, 비교적 작은 API를 구성한 다음 계속해서 Nest와 관련된 기능을 탐색하도록 진행합니다.

## 앱의 목적

중고차 견적을 내는 API를 만듭니다.

많은 사람들이 차를 팔려고 할 때 얼마에 팔아야 할지 파악하기 어렵습니다. 이 앱은 사용자가 대략 얼마에 차를 팔아야 할지 **예상가**를 알려주는 API를 제공합니다.

## 주요 기능

### 1. 사용자 인증
- 사용자가 이메일과 비밀번호로 가입을 진행합니다
- 사용자가 애플리케이션으로 로그인합니다

### 2. 차량 가격 예측
- 사용자가 로그인한 후 앱을 이용해 차의 가치가 대략 얼마일지 예상 가격을 받아볼 수 있습니다
- 예상가 산정 기준:
  - 차종
  - 모델
  - 연식
  - 주행거리

### 3. 실제 판매 금액 입력
- 사용자가 예상가를 받아본 후 실제로 차를 판매합니다
- 차를 팔고 나면 사용자가 앱으로 다시 돌아와 실제로 차를 판매한 금액을 입력할 수 있습니다
- 이 금액을 이용해 앞으로 문의하는 차량의 가격을 추산하는 능력을 더 보완합니다

### 4. 관리자 검토 시스템
- 오용을 방지하기 위해 애플리케이션 내부에 관리자 권한을 둡니다
- 보고되는 판매 건은 전부 관리자들이 검토합니다
- 사용자가 차량 판매 가격을 부정확하게 입력하는 것을 방지합니다
  - 예: 차량 판매 가격을 50억이나 0원으로 올리는 경우 방지
- 사용자가 차량을 판매했다고 보고할 때마다 데이터를 데이터 세트에 추가하기 전에 관리자가 해당 보고 건을 검토해야 합니다

## 앱의 특성

- 규모가 작은 편이지만, 이런 앱을 구성하기 위해 추가해야 할 부기능이 많습니다
- 겉보기에는 작을지 모르겠지만 상당한 양의 코드를 작성해야 합니다

## 고수준 아키텍처 설계

### 전체 구조 개요

애플리케이션을 구성하기 위해 필요한 요소들:
- 컨트롤러 (Controller)
- 서비스 (Service)
- 리포지토리 (Repository)

### 두 가지 주요 목표

앱 안에는 크게 2가지 목표가 있습니다:

1. **사용자와 인증을 처리하는 데 필요한 경로**
2. **보고서를 처리하고 생성하는 데 필요한 경로**

### 리소스별 구조

각 리소스마다 동일한 구조를 적용합니다:

#### 1. 사용자 리소스 (Users)

**사용자 모듈 구조:**
- `UsersController`: 사용자 관련 요청 처리
- `UsersService`: 사용자 관련 비즈니스 논리 처리
- `UsersRepository`: 데이터베이스에 사용자 저장 및 데이터 액세스 처리

#### 2. 보고서 리소스 (Reports)

**보고서 모듈 구조:**
- `ReportsController`: 보고서 관련 요청 처리
- `ReportsService`: 보고서 관련 비즈니스 논리 처리
- `ReportsRepository`: 보고서 데이터 액세스 처리

### 모듈 구조

각 리소스를 모듈로 그룹화합니다:

- **Users Module**: 사용자 모듈
  - 사용자 컨트롤러, 서비스, 리포지토리를 포함

- **Reports Module**: 보고서 모듈
  - 보고서 컨트롤러, 서비스, 리포지토리를 포함

### 설계 원칙

1. **리소스 구분**
   - 애플리케이션 내부에 여러 다양한 리소스를 구별해놓습니다
   - 각 리소스마다 컨트롤러, 서비스, 리포지토리가 있어야 한다고 가정합니다

2. **모듈화**
   - 컨트롤러, 서비스, 리포지토리를 각각 구분한 후 그룹으로 묶어서 각각 별개의 모듈로 구성합니다
   - 개별 리소스마다 모듈을 생성하고, 각 모듈에 컨트롤러, 서비스, 리포지토리를 포함시킵니다

3. **모듈의 역할**
   - 애플리케이션 안에서 생성하는 다양한 항목을 묶는 데 사용합니다
   - 모듈을 생성하는 이유와 모듈 간에 코드를 공유하는 방법을 중점적으로 다룹니다

### 시작 지점

이 지점에서 시작하면 좋습니다:

- 개별 리소스마다 모듈을 생성
- 각 모듈에 컨트롤러, 서비스, 리포지토리를 추가
- 처리해야 할 데이터나 리소스를 관리

### 향후 변경 사항

- 앱을 구축하기 시작한 후 생성해야 할 여러 가지 경로들이 보이게 됩니다
- 애플리케이션에 추가해 넣어야 하는 다른 데이터들도 보이게 됩니다
- 나중에 다시 돌아와서 설정을 살짝 바꿀 수 있습니다

### 다음 단계

다음 영상에서는:
- 이 조각들을 구현하는 코드를 차근차근 생성
- 리포지토리들을 생성하는 방법 하나씩 살펴보기
- 일반 파일 안에 데이터를 저장하는 것이 아니라 **진짜 데이터베이스를 사용**
- 새로 배울 것들이 많음
